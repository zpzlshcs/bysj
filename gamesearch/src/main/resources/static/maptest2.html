<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">

<head>
    <title>demo for 前端</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style type="text/css">
        .pl-20{
            padding-left:20px
        }
        text{
            cursor:pointer;
            max-width: 25px;
            display: inline-block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            vertical-align: middle;
        }
        circle{
            cursor:pointer;
        }
        #graphcontainerdiv{
            background:#fff;
        }
        .circle_opreate{
            display: none;
        }
    </style>
</head>

<body>
<div  id="app" class="mind-con">
    <div id="graphcontainer"  class="graphcontainer"></div>
    <div class="svg-set-box"></div>
</div>
</body>


<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.5.21/vue.js"></script>
<script src="https://cdn.bootcss.com/lodash.js/3.5.0/lodash.min.js"></script>
<script src="js/d3.js" type="application/javascript"></script>
<script th:inline="javascript" type="text/javascript">
    var jsondata2=
        {
            "node": [
                {
                "name": "组织机构",
                "uuid": "18147380"
            }, {
                "name": "公安厅",
                "uuid": "18147392"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "旅游局",
                "uuid": "18147393"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "气象局",
                "uuid": "18147394"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "交通运输厅",
                "uuid": "18147395"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "厅处室",
                "uuid": "18147401"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "办公室",
                "uuid": "18147424"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "法规处",
                "uuid": "18147425"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "规划处",
                "uuid": "18147426"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "财务处",
                "uuid": "18147427"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "建管处",
                "uuid": "18147428"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "安全处",
                "uuid": "18147429"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "科教处",
                "uuid": "18147430"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "审计处",
                "uuid": "18147431"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "人事处",
                "uuid": "18147432"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "机关党委",
                "uuid": "18147433"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "离退休干部处",
                "uuid": "18147434"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "综合处",
                "uuid": "18147435"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "驻厅纪检组",
                "uuid": "18147402"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "二级局",
                "uuid": "18147403"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "高速公路基础数据",
                "uuid": "18147378"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "公路局",
                "uuid": "18147406"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "道路运输局",
                "uuid": "18147407"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "海事航务局",
                "uuid": "18147408"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "高管局",
                "uuid": "18147409"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "交通建设工程质量监督局",
                "uuid": "18147410"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "直属单位",
                "uuid": "18147404"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "交通职业技术学院",
                "uuid": "18147419"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "交通建设工程造价管理站",
                "uuid": "18147420"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "公路运输海员工会",
                "uuid": "18147421"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "贵州交通信息与应急指挥中心贵州省路网中心",
                "uuid": "18147422"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "交通宣传教育中心",
                "uuid": "18147423"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "0",
                "name": "地州市交通局",
                "uuid": "18147405"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "贵阳市交通委员会",
                "uuid": "18147411"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "遵义市交通运输局",
                "uuid": "18147412"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "安顺市交通运输局",
                "uuid": "18147413"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "黔南州交通运输局",
                "uuid": "18147414"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "黔东南州交通运输局",
                "uuid": "18147415"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "毕节地区交通运输局",
                "uuid": "18147416"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "六盘水市交通运输局",
                "uuid": "18147417"
            }, {
                "filter": [],
                "showstyle": "0",
                "entitytype": "1",
                "name": "黔西南州交通运输局\n",
                "uuid": "18147418"
            }],
            "relationship": [
                {
                "sourceid": "18147380",
                "targetid": "18147392",
                "name": "下位",
                "uuid": "48723709"
            }, {
                "sourceid": "18147380",
                "targetid": "18147393",
                "name": "下位",
                "uuid": "48723710"
            }, {
                "sourceid": "18147380",
                "targetid": "18147394",
                "name": "下位",
                "uuid": "48723711"
            }, {
                "sourceid": "18147380",
                "targetid": "18147395",
                "name": "下位",
                "uuid": "48723712"
            }, {
                "sourceid": "18147395",
                "targetid": "18147401",
                "name": "下位",
                "uuid": "48723714"
            }, {
                "sourceid": "18147395",
                "targetid": "18147401",
                "name": "下位",
                "uuid": "48723714"
            }, {
                "sourceid": "18147401",
                "targetid": "18147424",
                "name": "下位",
                "uuid": "48723734"
            }, {
                "sourceid": "18147401",
                "targetid": "18147424",
                "name": "下位",
                "uuid": "48723734"
            }, {
                "sourceid": "18147401",
                "targetid": "18147424",
                "name": "下位",
                "uuid": "48723734"
            }, {
                "sourceid": "18147401",
                "targetid": "18147425",
                "name": "下位",
                "uuid": "48723735"
            }, {
                "sourceid": "18147401",
                "targetid": "18147425",
                "name": "下位",
                "uuid": "48723735"
            }, {
                "sourceid": "18147401",
                "targetid": "18147425",
                "name": "下位",
                "uuid": "48723735"
            }, {
                "sourceid": "18147401",
                "targetid": "18147426",
                "name": "下位",
                "uuid": "48723736"
            }, {
                "sourceid": "18147401",
                "targetid": "18147426",
                "name": "下位",
                "uuid": "48723736"
            }, {
                "sourceid": "18147401",
                "targetid": "18147426",
                "name": "下位",
                "uuid": "48723736"
            }, {
                "sourceid": "18147401",
                "targetid": "18147427",
                "name": "下位",
                "uuid": "48723737"
            }, {
                "sourceid": "18147401",
                "targetid": "18147427",
                "name": "下位",
                "uuid": "48723737"
            }, {
                "sourceid": "18147401",
                "targetid": "18147427",
                "name": "下位",
                "uuid": "48723737"
            }, {
                "sourceid": "18147401",
                "targetid": "18147428",
                "name": "下位",
                "uuid": "48723738"
            }, {
                "sourceid": "18147401",
                "targetid": "18147428",
                "name": "下位",
                "uuid": "48723738"
            }, {
                "sourceid": "18147401",
                "targetid": "18147428",
                "name": "下位",
                "uuid": "48723738"
            }, {
                "sourceid": "18147401",
                "targetid": "18147429",
                "name": "下位",
                "uuid": "48723739"
            }, {
                "sourceid": "18147401",
                "targetid": "18147429",
                "name": "下位",
                "uuid": "48723739"
            }, {
                "sourceid": "18147401",
                "targetid": "18147429",
                "name": "下位",
                "uuid": "48723739"
            }, {
                "sourceid": "18147401",
                "targetid": "18147430",
                "name": "下位",
                "uuid": "48723740"
            }, {
                "sourceid": "18147401",
                "targetid": "18147430",
                "name": "下位",
                "uuid": "48723740"
            }, {
                "sourceid": "18147401",
                "targetid": "18147430",
                "name": "下位",
                "uuid": "48723740"
            }, {
                "sourceid": "18147401",
                "targetid": "18147431",
                "name": "下位",
                "uuid": "48723741"
            }, {
                "sourceid": "18147401",
                "targetid": "18147431",
                "name": "下位",
                "uuid": "48723741"
            }, {
                "sourceid": "18147401",
                "targetid": "18147431",
                "name": "下位",
                "uuid": "48723741"
            }, {
                "sourceid": "18147401",
                "targetid": "18147432",
                "name": "下位",
                "uuid": "48723742"
            }, {
                "sourceid": "18147401",
                "targetid": "18147432",
                "name": "下位",
                "uuid": "48723742"
            }, {
                "sourceid": "18147401",
                "targetid": "18147432",
                "name": "下位",
                "uuid": "48723742"
            }, {
                "sourceid": "18147401",
                "targetid": "18147433",
                "name": "下位",
                "uuid": "48723743"
            }, {
                "sourceid": "18147401",
                "targetid": "18147433",
                "name": "下位",
                "uuid": "48723743"
            }, {
                "sourceid": "18147401",
                "targetid": "18147433",
                "name": "下位",
                "uuid": "48723743"
            }, {
                "sourceid": "18147401",
                "targetid": "18147434",
                "name": "下位",
                "uuid": "48723744"
            }, {
                "sourceid": "18147401",
                "targetid": "18147434",
                "name": "下位",
                "uuid": "48723744"
            }, {
                "sourceid": "18147401",
                "targetid": "18147434",
                "name": "下位",
                "uuid": "48723744"
            }, {
                "sourceid": "18147401",
                "targetid": "18147435",
                "name": "下位",
                "uuid": "48723745"
            }, {
                "sourceid": "18147401",
                "targetid": "18147435",
                "name": "下位",
                "uuid": "48723745"
            }, {
                "sourceid": "18147401",
                "targetid": "18147435",
                "name": "下位",
                "uuid": "48723745"
            }, {
                "sourceid": "18147395",
                "targetid": "18147402",
                "name": "下位",
                "uuid": "48723715"
            }, {
                "sourceid": "18147395",
                "targetid": "18147402",
                "name": "下位",
                "uuid": "48723715"
            }, {
                "sourceid": "18147395",
                "targetid": "18147403",
                "name": "下位",
                "uuid": "48723716"
            }, {
                "sourceid": "18147395",
                "targetid": "18147403",
                "name": "下位",
                "uuid": "48723716"
            }, {
                "sourceid": "18147403",
                "targetid": "18147378",
                "name": "",
                "uuid": "48723720"
            }, {
                "sourceid": "18147403",
                "targetid": "18147378",
                "name": "",
                "uuid": "48723720"
            }, {
                "sourceid": "18147403",
                "targetid": "18147378",
                "name": "",
                "uuid": "48723720"
            }, {
                "sourceid": "18147403",
                "targetid": "18147406",
                "name": "下位",
                "uuid": "48723721"
            }, {
                "sourceid": "18147403",
                "targetid": "18147406",
                "name": "下位",
                "uuid": "48723721"
            }, {
                "sourceid": "18147403",
                "targetid": "18147406",
                "name": "下位",
                "uuid": "48723721"
            }, {
                "sourceid": "18147403",
                "targetid": "18147407",
                "name": "下位",
                "uuid": "48723722"
            }, {
                "sourceid": "18147403",
                "targetid": "18147407",
                "name": "下位",
                "uuid": "48723722"
            }, {
                "sourceid": "18147403",
                "targetid": "18147407",
                "name": "下位",
                "uuid": "48723722"
            }, {
                "sourceid": "18147403",
                "targetid": "18147408",
                "name": "下位",
                "uuid": "48723723"
            }, {
                "sourceid": "18147403",
                "targetid": "18147408",
                "name": "下位",
                "uuid": "48723723"
            }, {
                "sourceid": "18147403",
                "targetid": "18147408",
                "name": "下位",
                "uuid": "48723723"
            }, {
                "sourceid": "18147403",
                "targetid": "18147409",
                "name": "下位",
                "uuid": "48723724"
            }, {
                "sourceid": "18147403",
                "targetid": "18147409",
                "name": "下位",
                "uuid": "48723724"
            }, {
                "sourceid": "18147403",
                "targetid": "18147409",
                "name": "下位",
                "uuid": "48723724"
            }, {
                "sourceid": "18147403",
                "targetid": "18147410",
                "name": "下位",
                "uuid": "48723725"
            }, {
                "sourceid": "18147403",
                "targetid": "18147410",
                "name": "下位",
                "uuid": "48723725"
            }, {
                "sourceid": "18147403",
                "targetid": "18147410",
                "name": "下位",
                "uuid": "48723725"
            }, {
                "sourceid": "18147395",
                "targetid": "18147404",
                "name": "下位",
                "uuid": "48723717"
            }, {
                "sourceid": "18147395",
                "targetid": "18147404",
                "name": "下位",
                "uuid": "48723717"
            }, {
                "sourceid": "18147404",
                "targetid": "18147419",
                "name": "下位",
                "uuid": "48723719"
            }, {
                "sourceid": "18147404",
                "targetid": "18147419",
                "name": "下位",
                "uuid": "48723719"
            }, {
                "sourceid": "18147404",
                "targetid": "18147419",
                "name": "下位",
                "uuid": "48723719"
            }, {
                "sourceid": "18147404",
                "targetid": "18147420",
                "name": "下位",
                "uuid": "48723729"
            }, {
                "sourceid": "18147404",
                "targetid": "18147420",
                "name": "下位",
                "uuid": "48723729"
            }, {
                "sourceid": "18147404",
                "targetid": "18147420",
                "name": "下位",
                "uuid": "48723729"
            }, {
                "sourceid": "18147404",
                "targetid": "18147421",
                "name": "下位",
                "uuid": "48723730"
            }, {
                "sourceid": "18147404",
                "targetid": "18147421",
                "name": "下位",
                "uuid": "48723730"
            }, {
                "sourceid": "18147404",
                "targetid": "18147421",
                "name": "下位",
                "uuid": "48723730"
            }, {
                "sourceid": "18147404",
                "targetid": "18147422",
                "name": "下位",
                "uuid": "48723732"
            }, {
                "sourceid": "18147404",
                "targetid": "18147422",
                "name": "下位",
                "uuid": "48723732"
            }, {
                "sourceid": "18147404",
                "targetid": "18147422",
                "name": "下位",
                "uuid": "48723732"
            }, {
                "sourceid": "18147404",
                "targetid": "18147423",
                "name": "下位",
                "uuid": "48723733"
            }, {
                "sourceid": "18147404",
                "targetid": "18147423",
                "name": "下位",
                "uuid": "48723733"
            }, {
                "sourceid": "18147404",
                "targetid": "18147423",
                "name": "下位",
                "uuid": "48723733"
            }, {
                "sourceid": "18147395",
                "targetid": "18147405",
                "name": "下位",
                "uuid": "48723718"
            }, {
                "sourceid": "18147395",
                "targetid": "18147405",
                "name": "下位",
                "uuid": "48723718"
            }, {
                "sourceid": "18147405",
                "targetid": "18147411",
                "name": "下位",
                "uuid": "48723726"
            }, {
                "sourceid": "18147405",
                "targetid": "18147411",
                "name": "下位",
                "uuid": "48723726"
            }, {
                "sourceid": "18147405",
                "targetid": "18147411",
                "name": "下位",
                "uuid": "48723726"
            }, {
                "sourceid": "18147405",
                "targetid": "18147412",
                "name": "下位",
                "uuid": "48723727"
            }, {
                "sourceid": "18147405",
                "targetid": "18147412",
                "name": "下位",
                "uuid": "48723727"
            }, {
                "sourceid": "18147405",
                "targetid": "18147412",
                "name": "下位",
                "uuid": "48723727"
            }, {
                "sourceid": "18147405",
                "targetid": "18147413",
                "name": "下位",
                "uuid": "48723728"
            }, {
                "sourceid": "18147405",
                "targetid": "18147413",
                "name": "下位",
                "uuid": "48723728"
            }, {
                "sourceid": "18147405",
                "targetid": "18147413",
                "name": "下位",
                "uuid": "48723728"
            }, {
                "sourceid": "18147405",
                "targetid": "18147414",
                "name": "下位",
                "uuid": "48723695"
            }, {
                "sourceid": "18147405",
                "targetid": "18147414",
                "name": "下位",
                "uuid": "48723695"
            }, {
                "sourceid": "18147405",
                "targetid": "18147414",
                "name": "下位",
                "uuid": "48723695"
            }, {
                "sourceid": "18147405",
                "targetid": "18147415",
                "name": "下位",
                "uuid": "48723693"
            }, {
                "sourceid": "18147405",
                "targetid": "18147415",
                "name": "下位",
                "uuid": "48723693"
            }, {
                "sourceid": "18147405",
                "targetid": "18147415",
                "name": "下位",
                "uuid": "48723693"
            }, {
                "sourceid": "18147405",
                "targetid": "18147416",
                "name": "下位",
                "uuid": "48723694"
            }, {
                "sourceid": "18147405",
                "targetid": "18147416",
                "name": "下位",
                "uuid": "48723694"
            }, {
                "sourceid": "18147405",
                "targetid": "18147416",
                "name": "下位",
                "uuid": "48723694"
            }, {
                "sourceid": "18147405",
                "targetid": "18147417",
                "name": "下位",
                "uuid": "48723692"
            }, {
                "sourceid": "18147405",
                "targetid": "18147417",
                "name": "下位",
                "uuid": "48723692"
            }, {
                "sourceid": "18147405",
                "targetid": "18147417",
                "name": "下位",
                "uuid": "48723692"
            }, {
                "sourceid": "18147405",
                "targetid": "18147418",
                "name": "下位",
                "uuid": "48723713"
            }, {
                "sourceid": "18147405",
                "targetid": "18147418",
                "name": "下位",
                "uuid": "48723713"
            }, {
                "sourceid": "18147405",
                "targetid": "18147418",
                "name": "下位",
                "uuid": "48723713"
            }]
        };
    var jsondata=
        {"24816":{},"61680":{},"61560":{},"40988824":{},"40992920":{},"20616":{},"57584":{},"24776":{},"49392":{},"57464":{},"20608":{},"32968":{},"49272":{},"24704":{},"16520":{},"65776":{},"36992":{},"65656":{},"41009304":{},"40984592":{},"node":[{"uuid":"49280","name":"狂暴双刃","color":"#0000CD"},{"uuid":"45256","name":"搏击拳套","color":"#0000CD"},{"uuid":"37024","name":"闪电匕首","color":"#0000CD"},{"uuid":"49352","name":"匕首","color":"#0000CD"},{"uuid":"8432","name":"穿云弓","color":"#0000CD"},{"uuid":"12528","name":"雷鸣刃","color":"#0000CD"},{"uuid":"20720","name":"反伤刺甲","color":"#0000CD"},{"uuid":"57464","name":"布甲","color":"#0000CD"},{"uuid":"8328","name":"冰痕之握","color":"#0000CD"},{"uuid":"41184","name":"光辉之剑","color":"#0000CD"},{"uuid":"33008","name":"红玛瑙","color":"#0000CD"},{"uuid":"12448","name":"救赎之翼","color":"#0000CD"},{"uuid":"36984","name":"风之轻语","color":"#0000CD"},{"uuid":"16608","name":"学识宝石","color":"#0000CD"},{"uuid":"12488","name":"鼓舞之盾","color":"#0000CD"},{"uuid":"40997016","name":"近卫荣耀","color":"#0000CD"},{"uuid":"16584","name":"凤鸣指环","color":"#0000CD"},{"uuid":"16544","name":"极影","color":"#0000CD"},{"uuid":"32888","name":"风灵纹章","color":"#0000CD"},{"uuid":"41080","name":"奔狼纹章","color":"#0000CD"},{"uuid":"24736","name":"冰霜长矛","color":"#0000CD"},{"uuid":"94328","name":"铁剑","color":"#0000CD"},{"uuid":"24776","name":"血魔之怒","color":"#0000CD"},{"uuid":"28912","name":"力量腰带","color":"#0000CD"},{"uuid":"24800","name":"暴烈之甲","color":"#0000CD"},{"uuid":"45176","name":"霸者重装","color":"#0000CD"},{"uuid":"77944","name":"冰霜法杖","color":"#0000CD"},{"uuid":"41009304","name":"大棒","color":"#0000CD"},{"uuid":"41017496","name":"咒术典籍","color":"#0000CD"},{"uuid":"20680","name":"破碎圣杯","color":"#0000CD"},{"uuid":"45184","name":"炼金护符","color":"#0000CD"},{"uuid":"53488","name":"炽热支配者","color":"#0000CD"},{"uuid":"37000","name":"蓝宝石","color":"#0000CD"},{"uuid":"24704","name":"金色圣剑","color":"#0000CD"},{"uuid":"41013400","name":"圣者法典","color":"#0000CD"},{"uuid":"20608","name":"辉月","color":"#0000CD"},{"uuid":"82040","name":"圣杯","color":"#0000CD"},{"uuid":"86136","name":"血族之书","color":"#0000CD"},{"uuid":"40976400","name":"噬神之书","color":"#0000CD"},{"uuid":"32904","name":"进化水晶","color":"#0000CD"},{"uuid":"28808","name":"时之预言","color":"#0000CD"},{"uuid":"41088","name":"魅影面罩","color":"#0000CD"},{"uuid":"41005208","name":"痛苦面具","color":"#0000CD"},{"uuid":"45296","name":"巫术法杖","color":"#0000CD"},{"uuid":"49392","name":"博学者之怒","color":"#0000CD"},{"uuid":"28872","name":"回响之杖","color":"#0000CD"},{"uuid":"73848","name":"贤者之书","color":"#0000CD"},{"uuid":"40980632","name":"魔女斗篷","color":"#0000CD"},{"uuid":"24816","name":"神隐斗篷","color":"#0000CD"},{"uuid":"53368","name":"抗魔披风","color":"#0000CD"},{"uuid":"61680","name":"破魔刀","color":"#0000CD"},{"uuid":"65776","name":"风暴巨剑","color":"#0000CD"},{"uuid":"57584","name":"泣血之刃","color":"#0000CD"},{"uuid":"45216","name":"吸血之镰","color":"#0000CD"},{"uuid":"41120","name":"末世","color":"#0000CD"},{"uuid":"40972440","name":"速击之枪","color":"#0000CD"},{"uuid":"12512","name":"破晓","color":"#0000CD"},{"uuid":"40976536","name":"冲能拳套","color":"#0000CD"},{"uuid":"28800","name":"纯净苍穹","color":"#0000CD"},{"uuid":"41025688","name":"宗师之力","color":"#0000CD"},{"uuid":"41029784","name":"无尽战刃","color":"#0000CD"},{"uuid":"90232","name":"破军","color":"#0000CD"},{"uuid":"40984728","name":"不死鸟之眼","color":"#0000CD"},{"uuid":"20616","name":"提神水晶","color":"#0000CD"},{"uuid":"40988824","name":"不祥征兆","color":"#0000CD"},{"uuid":"41001112","name":"守护者之铠","color":"#0000CD"},{"uuid":"16624","name":"极寒风暴","color":"#0000CD"},{"uuid":"16520","name":"雪山圆盾","color":"#0000CD"},{"uuid":"28832","name":"制裁之刃","color":"#0000CD"},{"uuid":"37064","name":"碎星锤","color":"#0000CD"},{"uuid":"49376","name":"陨星","color":"#0000CD"},{"uuid":"45280","name":"暗影战斧","color":"#0000CD"},{"uuid":"98424","name":"日冕","color":"#0000CD"},{"uuid":"41160","name":"名刀·司命","color":"#0000CD"},{"uuid":"49272","name":"熔炼之心","color":"#0000CD"},{"uuid":"40992920","name":"红莲斗篷","color":"#0000CD"},{"uuid":"41021592","name":"影刃","color":"#0000CD"},{"uuid":"20640","name":"逐日之弓","color":"#0000CD"},{"uuid":"61560","name":"巡守利斧","color":"#0000CD"},{"uuid":"36992","name":"狩猎宽刃","color":"#0000CD"},{"uuid":"41200","name":"追击刀锋","color":"#0000CD"},{"uuid":"24712","name":"贪婪之噬","color":"#0000CD"},{"uuid":"65656","name":"游击宽刃","color":"#0000CD"},{"uuid":"28896","name":"符文大剑","color":"#0000CD"},{"uuid":"37104","name":"巨人之握","color":"#0000CD"},{"uuid":"69752","name":"影忍之足","color":"#0000CD"},{"uuid":"32896","name":"神速之靴","color":"#0000CD"},{"uuid":"4232","name":"疾步之靴","color":"#0000CD"},{"uuid":"32928","name":"秘法之靴","color":"#0000CD"},{"uuid":"32992","name":"急速战靴","color":"#0000CD"},{"uuid":"37088","name":"冷静之靴","color":"#0000CD"},{"uuid":"40984592","name":"抵抗之靴","color":"#0000CD"},{"uuid":"20704","name":"梦魇之牙","color":"#0000CD"},{"uuid":"40980496","name":"贤者的庇护","color":"#0000CD"},{"uuid":"32968","name":"虚无法杖","color":"#0000CD"},{"uuid":"12424","name":"元素杖","color":"#0000CD"}],"40997016":{},"45184":{},"12448":{},"33008":{},"8432":{},"45216":{},"4232":{},"28832":{},"41005208":{},"40980632":{},"36984":{},"45176":{},"49376":{},"45296":{},"relationship":[{"name":"合成需要","sourceid":"37024","targetid":"45256"},{"name":"合成需要","sourceid":"37024","targetid":"49280"},{"name":"可以合成","sourceid":"45256","targetid":"37024"},{"name":"可以合成","sourceid":"45256","targetid":"49280"},{"name":"合成需要","sourceid":"12488","targetid":"16608"},{"name":"合成需要","sourceid":"12488","targetid":"33008"},{"name":"合成需要","sourceid":"40997016","targetid":"12488"},{"name":"合成需要","sourceid":"40997016","targetid":"33008"},{"name":"可以合成","sourceid":"12488","targetid":"40997016"},{"name":"合成需要","sourceid":"16584","targetid":"16608"},{"name":"合成需要","sourceid":"16584","targetid":"33008"},{"name":"合成需要","sourceid":"16544","targetid":"16584"},{"name":"合成需要","sourceid":"16544","targetid":"33008"},{"name":"可以合成","sourceid":"16584","targetid":"16544"},{"name":"合成需要","sourceid":"32888","targetid":"16608"},{"name":"合成需要","sourceid":"32888","targetid":"33008"},{"name":"合成需要","sourceid":"41080","targetid":"32888"},{"name":"合成需要","sourceid":"41080","targetid":"33008"},{"name":"可以合成","sourceid":"32888","targetid":"41080"},{"name":"可以合成","sourceid":"16608","targetid":"12488"},{"name":"可以合成","sourceid":"16608","targetid":"16584"},{"name":"可以合成","sourceid":"16608","targetid":"32888"},{"name":"可以合成","sourceid":"16608","targetid":"36984"},{"name":"合成需要","sourceid":"36984","targetid":"16608"},{"name":"合成需要","sourceid":"36984","targetid":"33008"},{"name":"可以合成","sourceid":"36984","targetid":"12448"},{"name":"合成需要","sourceid":"12448","targetid":"33008"},{"name":"合成需要","sourceid":"12448","targetid":"36984"},{"name":"合成需要","sourceid":"28912","targetid":"33008"},{"name":"合成需要","sourceid":"24800","targetid":"28912"},{"name":"合成需要","sourceid":"24800","targetid":"57464"},{"name":"合成需要","sourceid":"24800","targetid":"57464"},{"name":"合成需要","sourceid":"45176","targetid":"28912"},{"name":"合成需要","sourceid":"20608","targetid":"41009304"},{"name":"合成需要","sourceid":"20608","targetid":"41013400"},{"name":"合成需要","sourceid":"82040","targetid":"20680"},{"name":"合成需要","sourceid":"82040","targetid":"45184"},{"name":"合成需要","sourceid":"82040","targetid":"41013400"},{"name":"合成需要","sourceid":"82040","targetid":"41017496"},{"name":"合成需要","sourceid":"86136","targetid":"41013400"},{"name":"合成需要","sourceid":"86136","targetid":"41017496"},{"name":"合成需要","sourceid":"40976400","targetid":"33008"},{"name":"合成需要","sourceid":"40976400","targetid":"86136"},{"name":"合成需要","sourceid":"40976400","targetid":"41017496"},{"name":"可以合成","sourceid":"86136","targetid":"40976400"},{"name":"可以合成","sourceid":"41013400","targetid":"20608"},{"name":"可以合成","sourceid":"41013400","targetid":"24704"},{"name":"可以合成","sourceid":"41013400","targetid":"82040"},{"name":"可以合成","sourceid":"41013400","targetid":"86136"},{"name":"合成需要","sourceid":"24704","targetid":"37000"},{"name":"合成需要","sourceid":"24704","targetid":"41013400"},{"name":"合成需要","sourceid":"24704","targetid":"41017496"},{"name":"合成需要","sourceid":"32904","targetid":"33008"},{"name":"合成需要","sourceid":"32904","targetid":"37000"},{"name":"合成需要","sourceid":"28808","targetid":"32904"},{"name":"合成需要","sourceid":"28808","targetid":"41009304"},{"name":"可以合成","sourceid":"32904","targetid":"28808"},{"name":"可以合成","sourceid":"37000","targetid":"24704"},{"name":"可以合成","sourceid":"37000","targetid":"32904"},{"name":"可以合成","sourceid":"37000","targetid":"41184"},{"name":"可以合成","sourceid":"37000","targetid":"53488"},{"name":"合成需要","sourceid":"53488","targetid":"37000"},{"name":"合成需要","sourceid":"53488","targetid":"45184"},{"name":"合成需要","sourceid":"53488","targetid":"41009304"},{"name":"可以合成","sourceid":"45184","targetid":"20680"},{"name":"可以合成","sourceid":"45184","targetid":"53488"},{"name":"可以合成","sourceid":"45184","targetid":"82040"},{"name":"合成需要","sourceid":"20680","targetid":"45184"},{"name":"合成需要","sourceid":"20680","targetid":"41017496"},{"name":"可以合成","sourceid":"20680","targetid":"82040"},{"name":"合成需要","sourceid":"41088","targetid":"33008"},{"name":"合成需要","sourceid":"41088","targetid":"41017496"},{"name":"合成需要","sourceid":"41005208","targetid":"41088"},{"name":"合成需要","sourceid":"41005208","targetid":"41017496"},{"name":"可以合成","sourceid":"41088","targetid":"41005208"},{"name":"合成需要","sourceid":"45296","targetid":"41184"},{"name":"合成需要","sourceid":"45296","targetid":"41017496"},{"name":"合成需要","sourceid":"49392","targetid":"41009304"},{"name":"合成需要","sourceid":"49392","targetid":"41017496"},{"name":"可以合成","sourceid":"41017496","targetid":"20680"},{"name":"可以合成","sourceid":"41017496","targetid":"24704"},{"name":"可以合成","sourceid":"41017496","targetid":"41088"},{"name":"可以合成","sourceid":"41017496","targetid":"45296"},{"name":"可以合成","sourceid":"41017496","targetid":"49392"},{"name":"可以合成","sourceid":"41017496","targetid":"82040"},{"name":"可以合成","sourceid":"41017496","targetid":"86136"},{"name":"可以合成","sourceid":"41017496","targetid":"40976400"},{"name":"可以合成","sourceid":"41017496","targetid":"41005208"},{"name":"可以合成","sourceid":"41017496","targetid":"41009304"},{"name":"合成需要","sourceid":"41009304","targetid":"41017496"},{"name":"合成需要","sourceid":"28872","targetid":"41009304"},{"name":"合成需要","sourceid":"73848","targetid":"41009304"},{"name":"可以合成","sourceid":"41009304","targetid":"20608"},{"name":"可以合成","sourceid":"41009304","targetid":"28808"},{"name":"可以合成","sourceid":"41009304","targetid":"28872"},{"name":"可以合成","sourceid":"41009304","targetid":"49392"},{"name":"可以合成","sourceid":"41009304","targetid":"53488"},{"name":"可以合成","sourceid":"41009304","targetid":"73848"},{"name":"可以合成","sourceid":"41009304","targetid":"77944"},{"name":"合成需要","sourceid":"77944","targetid":"28912"},{"name":"合成需要","sourceid":"77944","targetid":"41009304"},{"name":"合成需要","sourceid":"65776","targetid":"94328"},{"name":"合成需要","sourceid":"40972440","targetid":"49352"},{"name":"合成需要","sourceid":"28800","targetid":"49352"},{"name":"合成需要","sourceid":"28800","targetid":"40972440"},{"name":"合成需要","sourceid":"28800","targetid":"40976536"},{"name":"合成需要","sourceid":"41025688","targetid":"12528"},{"name":"合成需要","sourceid":"41025688","targetid":"41184"},{"name":"合成需要","sourceid":"41025688","targetid":"40976536"},{"name":"合成需要","sourceid":"41029784","targetid":"65776"},{"name":"合成需要","sourceid":"41029784","targetid":"94328"},{"name":"合成需要","sourceid":"41029784","targetid":"40976536"},{"name":"可以合成","sourceid":"40976536","targetid":"12512"},{"name":"可以合成","sourceid":"40976536","targetid":"28800"},{"name":"可以合成","sourceid":"40976536","targetid":"41025688"},{"name":"可以合成","sourceid":"40976536","targetid":"41029784"},{"name":"合成需要","sourceid":"12512","targetid":"8432"},{"name":"合成需要","sourceid":"12512","targetid":"40972440"},{"name":"合成需要","sourceid":"12512","targetid":"40976536"},{"name":"可以合成","sourceid":"40972440","targetid":"12512"},{"name":"可以合成","sourceid":"40972440","targetid":"28800"},{"name":"可以合成","sourceid":"40972440","targetid":"41120"},{"name":"合成需要","sourceid":"41120","targetid":"12528"},{"name":"合成需要","sourceid":"41120","targetid":"45216"},{"name":"合成需要","sourceid":"41120","targetid":"49352"},{"name":"合成需要","sourceid":"41120","targetid":"40972440"},{"name":"可以合成","sourceid":"45216","targetid":"41120"},{"name":"可以合成","sourceid":"45216","targetid":"57584"},{"name":"合成需要","sourceid":"57584","targetid":"45216"},{"name":"合成需要","sourceid":"57584","targetid":"65776"},{"name":"合成需要","sourceid":"90232","targetid":"65776"},{"name":"可以合成","sourceid":"65776","targetid":"57584"},{"name":"可以合成","sourceid":"65776","targetid":"61680"},{"name":"可以合成","sourceid":"65776","targetid":"90232"},{"name":"可以合成","sourceid":"65776","targetid":"41029784"},{"name":"合成需要","sourceid":"61680","targetid":"53368"},{"name":"合成需要","sourceid":"61680","targetid":"65776"},{"name":"可以合成","sourceid":"53368","targetid":"24816"},{"name":"可以合成","sourceid":"53368","targetid":"61680"},{"name":"合成需要","sourceid":"24816","targetid":"33008"},{"name":"合成需要","sourceid":"24816","targetid":"53368"},{"name":"可以合成","sourceid":"20616","targetid":"40984728"},{"name":"合成需要","sourceid":"40984728","targetid":"20616"},{"name":"合成需要","sourceid":"40984728","targetid":"24816"},{"name":"合成需要","sourceid":"40984728","targetid":"33008"},{"name":"可以合成","sourceid":"24816","targetid":"40980632"},{"name":"可以合成","sourceid":"24816","targetid":"40984728"},{"name":"合成需要","sourceid":"40980632","targetid":"24816"},{"name":"合成需要","sourceid":"40980632","targetid":"28912"},{"name":"合成需要","sourceid":"41001112","targetid":"57464"},{"name":"合成需要","sourceid":"16520","targetid":"57464"},{"name":"可以合成","sourceid":"16520","targetid":"16624"},{"name":"合成需要","sourceid":"16624","targetid":"16520"},{"name":"合成需要","sourceid":"16624","targetid":"41001112"},{"name":"可以合成","sourceid":"41001112","targetid":"16624"},{"name":"可以合成","sourceid":"41001112","targetid":"40988824"},{"name":"合成需要","sourceid":"40988824","targetid":"28912"},{"name":"合成需要","sourceid":"40988824","targetid":"41001112"},{"name":"可以合成","sourceid":"28912","targetid":"24776"},{"name":"可以合成","sourceid":"28912","targetid":"24800"},{"name":"可以合成","sourceid":"28912","targetid":"45176"},{"name":"可以合成","sourceid":"28912","targetid":"77944"},{"name":"可以合成","sourceid":"28912","targetid":"40980632"},{"name":"可以合成","sourceid":"28912","targetid":"40988824"},{"name":"合成需要","sourceid":"24776","targetid":"28912"},{"name":"合成需要","sourceid":"24776","targetid":"94328"},{"name":"合成需要","sourceid":"28832","targetid":"12528"},{"name":"合成需要","sourceid":"28832","targetid":"94328"},{"name":"合成需要","sourceid":"49376","targetid":"94328"},{"name":"合成需要","sourceid":"98424","targetid":"94328"},{"name":"可以合成","sourceid":"98424","targetid":"24736"},{"name":"可以合成","sourceid":"98424","targetid":"45280"},{"name":"合成需要","sourceid":"45280","targetid":"49376"},{"name":"合成需要","sourceid":"45280","targetid":"98424"},{"name":"可以合成","sourceid":"49376","targetid":"37064"},{"name":"可以合成","sourceid":"49376","targetid":"45280"},{"name":"合成需要","sourceid":"37064","targetid":"49376"},{"name":"合成需要","sourceid":"37064","targetid":"94328"},{"name":"合成需要","sourceid":"41160","targetid":"12528"},{"name":"合成需要","sourceid":"41160","targetid":"94328"},{"name":"可以合成","sourceid":"94328","targetid":"24736"},{"name":"可以合成","sourceid":"94328","targetid":"24776"},{"name":"可以合成","sourceid":"94328","targetid":"28832"},{"name":"可以合成","sourceid":"94328","targetid":"37064"},{"name":"可以合成","sourceid":"94328","targetid":"41160"},{"name":"可以合成","sourceid":"94328","targetid":"49376"},{"name":"可以合成","sourceid":"94328","targetid":"65776"},{"name":"可以合成","sourceid":"94328","targetid":"98424"},{"name":"可以合成","sourceid":"94328","targetid":"41029784"},{"name":"合成需要","sourceid":"24736","targetid":"33008"},{"name":"合成需要","sourceid":"24736","targetid":"94328"},{"name":"合成需要","sourceid":"24736","targetid":"98424"},{"name":"合成需要","sourceid":"49272","targetid":"33008"},{"name":"合成需要","sourceid":"40992920","targetid":"49272"},{"name":"合成需要","sourceid":"40992920","targetid":"57464"},{"name":"可以合成","sourceid":"49272","targetid":"40992920"},{"name":"可以合成","sourceid":"33008","targetid":"12448"},{"name":"可以合成","sourceid":"33008","targetid":"12488"},{"name":"可以合成","sourceid":"33008","targetid":"16544"},{"name":"可以合成","sourceid":"33008","targetid":"16584"},{"name":"可以合成","sourceid":"33008","targetid":"24736"},{"name":"可以合成","sourceid":"33008","targetid":"24816"},{"name":"可以合成","sourceid":"33008","targetid":"28912"},{"name":"可以合成","sourceid":"33008","targetid":"32888"},{"name":"可以合成","sourceid":"33008","targetid":"32904"},{"name":"可以合成","sourceid":"33008","targetid":"36984"},{"name":"可以合成","sourceid":"33008","targetid":"41080"},{"name":"可以合成","sourceid":"33008","targetid":"41088"},{"name":"可以合成","sourceid":"33008","targetid":"41184"},{"name":"可以合成","sourceid":"33008","targetid":"49272"},{"name":"可以合成","sourceid":"33008","targetid":"40976400"},{"name":"可以合成","sourceid":"33008","targetid":"40984728"},{"name":"可以合成","sourceid":"33008","targetid":"40997016"},{"name":"合成需要","sourceid":"41184","targetid":"33008"},{"name":"合成需要","sourceid":"41184","targetid":"37000"},{"name":"可以合成","sourceid":"41184","targetid":"8328"},{"name":"可以合成","sourceid":"41184","targetid":"45296"},{"name":"可以合成","sourceid":"41184","targetid":"41025688"},{"name":"合成需要","sourceid":"8328","targetid":"41184"},{"name":"合成需要","sourceid":"8328","targetid":"57464"},{"name":"可以合成","sourceid":"57464","targetid":"8328"},{"name":"可以合成","sourceid":"57464","targetid":"16520"},{"name":"可以合成","sourceid":"57464","targetid":"20720"},{"name":"可以合成","sourceid":"57464","targetid":"24800"},{"name":"可以合成","sourceid":"57464","targetid":"24800"},{"name":"可以合成","sourceid":"57464","targetid":"40992920"},{"name":"可以合成","sourceid":"57464","targetid":"41001112"},{"name":"合成需要","sourceid":"20720","targetid":"12528"},{"name":"合成需要","sourceid":"20720","targetid":"57464"},{"name":"可以合成","sourceid":"12528","targetid":"8432"},{"name":"可以合成","sourceid":"12528","targetid":"20720"},{"name":"可以合成","sourceid":"12528","targetid":"28832"},{"name":"可以合成","sourceid":"12528","targetid":"41120"},{"name":"可以合成","sourceid":"12528","targetid":"41160"},{"name":"可以合成","sourceid":"12528","targetid":"41025688"},{"name":"合成需要","sourceid":"8432","targetid":"12528"},{"name":"合成需要","sourceid":"8432","targetid":"49352"},{"name":"可以合成","sourceid":"8432","targetid":"12512"},{"name":"合成需要","sourceid":"41021592","targetid":"49280"},{"name":"合成需要","sourceid":"41021592","targetid":"49352"},{"name":"可以合成","sourceid":"49352","targetid":"8432"},{"name":"可以合成","sourceid":"49352","targetid":"28800"},{"name":"可以合成","sourceid":"49352","targetid":"41120"},{"name":"可以合成","sourceid":"49352","targetid":"49280"},{"name":"可以合成","sourceid":"49352","targetid":"40972440"},{"name":"可以合成","sourceid":"49352","targetid":"41021592"},{"name":"合成需要","sourceid":"49280","targetid":"45256"},{"name":"合成需要","sourceid":"49280","targetid":"49352"},{"name":"合成需要","sourceid":"20640","targetid":"49280"},{"name":"可以合成","sourceid":"49280","targetid":"20640"},{"name":"可以合成","sourceid":"49280","targetid":"37024"},{"name":"可以合成","sourceid":"49280","targetid":"41021592"},{"name":"合成需要","sourceid":"41200","targetid":"36992"},{"name":"合成需要","sourceid":"24712","targetid":"41200"},{"name":"可以合成","sourceid":"41200","targetid":"24712"},{"name":"合成需要","sourceid":"65656","targetid":"36992"},{"name":"合成需要","sourceid":"28896","targetid":"65656"},{"name":"可以合成","sourceid":"65656","targetid":"28896"},{"name":"可以合成","sourceid":"36992","targetid":"41200"},{"name":"可以合成","sourceid":"36992","targetid":"61560"},{"name":"可以合成","sourceid":"36992","targetid":"65656"},{"name":"合成需要","sourceid":"61560","targetid":"36992"},{"name":"合成需要","sourceid":"37104","targetid":"61560"},{"name":"可以合成","sourceid":"61560","targetid":"37104"},{"name":"合成需要","sourceid":"4232","targetid":"32896"},{"name":"合成需要","sourceid":"32928","targetid":"32896"},{"name":"合成需要","sourceid":"32992","targetid":"32896"},{"name":"合成需要","sourceid":"37088","targetid":"32896"},{"name":"合成需要","sourceid":"40984592","targetid":"32896"},{"name":"可以合成","sourceid":"32896","targetid":"4232"},{"name":"可以合成","sourceid":"32896","targetid":"32928"},{"name":"可以合成","sourceid":"32896","targetid":"32992"},{"name":"可以合成","sourceid":"32896","targetid":"37088"},{"name":"可以合成","sourceid":"32896","targetid":"69752"},{"name":"可以合成","sourceid":"32896","targetid":"40984592"},{"name":"合成需要","sourceid":"69752","targetid":"32896"}],"82040":{},"20720":{},"41088":{},"41120":{},"69752":{},"40980496":{},"37024":{},"32928":{},"16584":{},"20680":{},"24800":{},"32896":{},"41021592":{},"41080":{},"16624":{},"41017496":{},"45280":{},"40984728":{},"73848":{},"12424":{},"24736":{},"94328":{},"41001112":{},"40972440":{},"40976400":{},"28896":{},"8328":{},"49352":{},"32888":{},"12512":{},"41184":{},"90232":{},"37000":{},"37088":{},"20704":{},"12528":{},"40976536":{},"41025688":{},"16608":{},"32992":{},"86136":{},"12488":{},"77944":{},"45256":{},"98424":{},"41029784":{},"28912":{},"24712":{},"53488":{},"53368":{},"28872":{},"32904":{},"41013400":{},"28808":{},"37064":{},"20640":{},"41200":{},"28800":{},"49280":{},"37104":{},"16544":{},"41160":{}};
    var app = new Vue({
        el: '#app',
        data: {
            svg:null,
            timer:null,
            editor:null,
            simulation:null,
            linkGroup:null,
            linktextGroup:null,
            nodeGroup:null,
            nodetextGroup:null,
            nodesymbolGroup:null,
            nodebuttonGroup:null,
            nodebuttonAction:'',
            txx:{},
            tyy:{},
            colorList: ["#ff8373", "#f9c62c", "#a5ca34", "#6fce7a", "#70d3bd", "#ea91b0"],
            color5: '#ff4500',
            predefineColors: ['#ff4500', '#ff8c00', '#90ee90', '#00ced1', '#1e90ff', '#c71585'],
            defaultcr: 30,
            selectnodeid: 0,
            selectnodename: '',
            selectsourcenodeid: 0,
            selecttargetnodeid: 0,
            graph: {
                nodes: [],
                links: []
            },
            graphEntity: {
                uuid: 0,
                name: '',
                color: 'ff4500',
                r: 30,
                x: "",
                y: ""
            },
            dialogFormVisible: false,
            headers: {},
        },
        mounted() {
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            var str = '{ "' + header + '": "' + token + '"}';
            this.headers = eval('(' + str + ')');
            this.initgraph();
            this.updategraph();
        },
        created() {
            this.graph.nodes = jsondata.node;
            this.graph.links = jsondata.relationship;
        },
        methods: {
            btnaddsingle(){
                d3.select('.graphcontainer').style("cursor", "crosshair");//进入新增模式，鼠标变成＋
            },
            btndeletelink() {
                this.isdeletelink = true;
                d3.select('.link').attr("class", "link linkdelete"); // 修改鼠标样式为"+"
            },
            getmorenode() {
                var _this = this;
                var data = {domain: _this.domain, nodeid: _this.selectnodeid};
                $.ajax({
                    data: data,
                    type: "POST",
                    url: contextRoot + "getmorerelationnode",
                    success: function (result) {
                        if (result.code == 200) {
                            var newnodes = result.data.node;
                            var newships = result.data.relationship;
                            var oldnodescount = _this.graph.nodes.length;
                            newnodes.forEach(function (m) {
                                var sobj = _this.graph.nodes.find(function (x) {
                                    return x.uuid === m.uuid
                                })
                                if (typeof(sobj) == "undefined") {
                                    _this.graph.nodes.push(m);
                                }
                            })
                            var newnodescount = _this.graph.nodes.length;
                            if (newnodescount <= oldnodescount) {
                                _this.$message({
                                    message: '没有更多节点信息',
                                    type: 'success'
                                });
                                return;
                            }
                            newships.forEach(function (m) {
                                var sobj = _this.graph.links.find(function (x) {
                                    return x.uuid === m.uuid
                                })
                                if (typeof(sobj) == "undefined") {
                                    _this.graph.links.push(m);
                                }
                            })
                            _this.updategraph();
                        }
                    },
                    error: function (data) {
                    }
                });
            },
            initgraph(){
                var graphcontainer = d3.select(".graphcontainer");
                var width = graphcontainer._groups[0][0].offsetWidth;
                var height = window.screen.height - 154;//
                this.svg = graphcontainer.append("svg");
                this.svg.attr("width", width);
                this.svg.attr("height", height);
                this.simulation = d3.forceSimulation()
                    .force("link", d3.forceLink().distance(400).id(function (d) {
                        return d.uuid
                    }))
                    .force("charge", d3.forceManyBody().strength(-400))
                    .force("collide", d3.forceCollide().strength(-30))
                    .force("center", d3.forceCenter(width / 2, (height - 200) / 2));
                this.linkGroup = this.svg.append("g").attr("class", "line");
                this.linktextGroup = this.svg.append("g").attr("class", "linetext");
                this.nodeGroup = this.svg.append("g").attr("class", "node");
                this.nodetextGroup = this.svg.append("g").attr("class", "nodetext");
                this.nodesymbolGroup = this.svg.append("g").attr("class", "nodesymbol");
                this.nodebuttonGroup = this.svg.append("g").attr("class", "nodebutton");
                this.addmaker();
                this.addnodebutton();
                this.svg.on('click',function(){
                    d3.selectAll("use").classed("circle_opreate", true);
                }, 'false');
            },
            updategraph() {
                var _this = this;
                var lks = this.graph.links;
                var nodes = this.graph.nodes;
                var links = [];
                lks.forEach(function (m) {
                    var sourceNode = nodes.filter(function (n) {
                        return n.uuid === m.sourceid;
                    })[0];
                    if (typeof(sourceNode) == 'undefined') return;
                    var targetNode = nodes.filter(function (n) {
                        return n.uuid === m.targetid;
                    })[0];
                    if (typeof(targetNode) == 'undefined') return;
                    links.push({source: sourceNode.uuid, target: targetNode.uuid, lk: m});
                });
                if(links.length>0){
                    _.each(links, function(link) {
                        var same = _.where(links, {
                            'source': link.source,
                            'target': link.target
                        });
                        var sameAlt = _.where(links, {
                            'source': link.target,
                            'target': link.source
                        });
                        var sameAll = same.concat(sameAlt);
                        _.each(sameAll, function(s, i) {
                            s.sameIndex = (i + 1);
                            s.sameTotal = sameAll.length;
                            s.sameTotalHalf = (s.sameTotal / 2);
                            s.sameUneven = ((s.sameTotal % 2) !== 0);
                            s.sameMiddleLink = ((s.sameUneven === true) &&(Math.ceil(s.sameTotalHalf) === s.sameIndex));
                            s.sameLowerHalf = (s.sameIndex <= s.sameTotalHalf);
                            s.sameArcDirection = 1;
                            //s.sameArcDirection = s.sameLowerHalf ? 0 : 1;
                            s.sameIndexCorrected = s.sameLowerHalf ? s.sameIndex : (s.sameIndex - Math.ceil(s.sameTotalHalf));
                        });
                    });
                    var maxSame = _.chain(links)
                        .sortBy(function(x) {
                            return x.sameTotal;
                        })
                        .last()
                        .value().sameTotal;
                    _.each(links, function(link) {
                        link.maxSameHalf = Math.round(maxSame / 2);
                    });
                }
                // 更新连线 links
                var link = _this.linkGroup.selectAll(".line >path").data(links, function (d) {
                    return d.uuid;
                });
                link.exit().remove();
                var linkEnter = _this.drawlink(link);
                link = linkEnter.merge(link);
                // 更新连线文字
                var linktext = _this.linktextGroup.selectAll("text").data(links, function (d) {
                    return d.uuid;
                });
                linktext.exit().remove();
                var linktextEnter = _this.drawlinktext(linktext);
                linktext = linktextEnter.merge(linktext).text(function (d) {
                    return d.lk.name;
                });
                // 更新节点按钮组
                d3.selectAll(".nodebutton  >g").remove();
                var nodebutton = _this.nodebuttonGroup.selectAll(".nodebutton").data(nodes, function (d) {
                    return d
                });
                nodebutton.exit().remove();
                var nodebuttonEnter = _this.drawnodebutton(nodebutton);
                nodebutton = nodebuttonEnter.merge(nodebutton);
                // 更新节点
                var node = _this.nodeGroup.selectAll("circle").data(nodes, function (d) {
                    return d
                });
                node.exit().remove();
                var nodeEnter = _this.drawnode(node);
                node = nodeEnter.merge(node).text(function (d) {
                    return d.name;
                });
                // 更新节点文字
                var nodetext = _this.nodetextGroup.selectAll("text").data(nodes, function (d) {
                    return d.uuid
                });
                nodetext.exit().remove();
                var nodetextEnter = _this.drawnodetext(nodetext);
                nodetext = nodetextEnter.merge(nodetext).text(function (d) {
                    return d.name;
                });
                nodetext.append("title")// 为每个节点设置title
                    .text(function (d) {
                        return d.name;
                    });
                // 更新节点标识
                var nodesymbol = _this.nodesymbolGroup.selectAll("path").data(nodes, function (d) {
                    return d.uuid;
                });
                nodesymbol.exit().remove();
                var nodesymbolEnter = _this.drawnodesymbol(nodesymbol);
                nodesymbol = nodesymbolEnter.merge(nodesymbol);
                nodesymbol.attr("fill", "#e15500");
                nodesymbol.attr("display", function (d) {
                    if (typeof(d.hasfile) != "undefined" && d.hasfile > 0) {
                        return "block";
                    }
                    return "none";
                })
                _this.simulation.nodes(nodes).on("tick", ticked);
                _this.simulation.force("link").links(links);
                _this.simulation.alphaTarget(0).restart();
                function linkArc(d) {
                    var dx = (d.target.x - d.source.x),
                        dy = (d.target.y - d.source.y),
                        dr = Math.sqrt(dx * dx + dy * dy),
                        unevenCorrection = (d.sameUneven ? 0 : 0.5);
                    var curvature = 2,
                        arc = (1.0/curvature)*((dr * d.maxSameHalf) / (d.sameIndexCorrected - unevenCorrection));
                    if (d.sameMiddleLink) {
                        arc = 0;
                    }
                    var dd="M" + d.source.x + "," + d.source.y + "A" + arc + "," + arc + " 0 0," + d.sameArcDirection + " " + d.target.x + "," + d.target.y;
                    return dd;
                }
                function ticked() {
                    // 更新连线坐标
                    /*link.attr("x1", function (d) {
                        return d.source.x;
                       })
                        .attr("y1", function (d) {
                            return d.source.y;
                        })
                        .attr("x2", function (d) {
                            return d.target.x;
                        })
                        .attr("y2", function (d) {
                            return d.target.y;
                        });*/
                    link.attr("d", linkArc)
                    // 刷新连接线上的文字位置
                    /* linktext.attr("x", function (d) {
                         return (d.source.x + d.target.x) / 2;
                     })
                         .attr("y", function (d) {
                             return (d.source.y + d.target.y) / 2;
                         })*/
                    // 更新节点坐标
                    node.attr("cx", function (d) {
                        return d.x;
                    })
                        .attr("cy", function (d) {
                            return d.y;
                        });
                    // 更新节点操作按钮组坐标
                    nodebutton.attr("cx", function (d) {
                        return d.x;
                    })
                        .attr("cy", function (d) {
                            return d.y;
                        });
                    nodebutton.attr("transform", function (d) {
                        return "translate(" + d.x + "," + d.y+ ") scale(1)";
                    })
                    // 更新文字坐标
                    nodetext.attr("x", function (d) {
                        return d.x;
                    })
                        .attr("y", function (d) {
                            return d.y;
                        });
                    // 更新回形针坐标
                    nodesymbol.attr("transform", function (d) {
                        return "translate(" + (d.x + 8) + "," + (d.y - 30) + ") scale(0.015,0.015)";
                    })
                }
                // 鼠标滚轮缩放
                //_this.svg.call(d3.zoom().transform, d3.zoomIdentity);//缩放至初始倍数
                _this.svg.call(d3.zoom().on("zoom", function () {
                    d3.selectAll('.node').attr("transform",d3.event.transform);
                    d3.selectAll('.nodetext').attr("transform",d3.event.transform);
                    d3.selectAll('.line').attr("transform",d3.event.transform);
                    d3.selectAll('.linetext').attr("transform",d3.event.transform);
                    d3.selectAll('.nodesymbol').attr("transform",d3.event.transform);
                    d3.selectAll('.nodebutton').attr("transform",d3.event.transform);
                    //_this.svg.selectAll("g").attr("transform", d3.event.transform);
                }));
                _this.svg.on("dblclick.zoom", null); // 静止双击缩放
                //按钮组事件
                _this.svg.selectAll(".buttongroup").on("click", function (d,i) {
                    console.log(_this.nodebuttonAction);
                    console.log(d);
                    if (_this.nodebuttonAction) {
                        switch (_this.nodebuttonAction) {
                            case "EDIT":
                                _this.isedit = true;
                                _this.propactiveName = 'propedit';
                                _this.txx=d.x;
                                _this.tyy=d.y;
                                break;
                            case "MORE":
                                _this.getmorenode();
                                break;
                            case "CHILD":
                                _this.operatetype = 2;
                                _this.isbatchcreate = true;
                                _this.isedit = false;
                                break;
                            case "LINK":
                                _this.isaddlink = true;
                                _this.selectsourcenodeid=d.uuid;
                                break;
                            case "DELETE":
                                _this.selectnodeid=d.uuid;
                                var out_buttongroup_id='.out_buttongroup_'+i;
                                _this.deletenode(out_buttongroup_id);
                                break;
                        }
                        ACTION = '';//重置 ACTION
                    }
                });
                //按钮组事件绑定
                _this.svg.selectAll(".action_0").on("click", function (d) {
                    _this.nodebuttonAction='EDIT';
                });
                _this.svg.selectAll(".action_1").on("click", function (d) {
                    _this.nodebuttonAction='MORE';
                });
                _this.svg.selectAll(".action_2").on("click", function (d) {
                    _this.nodebuttonAction='CHILD';
                });
                _this.svg.selectAll(".action_3").on("click", function (d) {
                    _this.nodebuttonAction='LINK';
                });
                _this.svg.selectAll(".action_4").on("click", function (d) {
                    _this.nodebuttonAction='DELETE';
                });
            },
            createnode() {
                var _this = this;
                var data = _this.graphEntity;
                data.domain = _this.domain;

            },
            addmaker() {
                var arrowMarker = this.svg.append("marker")
                    .attr("id", "arrow")
                    .attr("markerUnits", "strokeWidth")
                    .attr("markerWidth", "20")//
                    .attr("markerHeight", "20")
                    .attr("viewBox", "0 -5 10 10")
                    .attr("refX", "22")// 13
                    .attr("refY", "0")
                    .attr("orient", "auto");
                var arrow_path = "M0,-5L10,0L0,5";// 定义箭头形状
                arrowMarker.append("path").attr("d", arrow_path).attr("fill", "#fce6d4");
            },
            addnodebutton() {
                var _this = this;
                var nodebutton = this.svg.append("defs").append("g")
                    .attr("id", "out_circle")
                var database = [1,1,1,1,1];
                var pie = d3.pie();
                var piedata = pie(database);
                var buttonEnter=nodebutton.selectAll(".buttongroup")
                    .data(piedata)
                    .enter()
                    .append("g")
                    .attr("class", function (d, i) {
                        return "action_" + i ;
                    });
                var arc = d3.arc()
                    .innerRadius(30)
                    .outerRadius(60);
                buttonEnter.append("path")
                    .attr("d", function (d) {
                        return arc(d)
                    })
                    .attr("fill", "#D2D5DA")
                    .style("opacity", 0.6)
                    .attr("stroke", "#f0f0f4")
                    .attr("stroke-width", 2);
                buttonEnter.append("text")
                    .attr("transform", function (d, i) {
                        return "translate(" + arc.centroid(d) + ")";
                    })
                    .attr("text-anchor", "middle")
                    .text(function (d, i) {
                        var zi = new Array()
                        zi[0] = "编辑";
                        zi[1] = "展开";
                        zi[2] = "追加";
                        zi[3] = "连线";
                        zi[4] = "删除";
                        return zi[i]
                    })
                    .attr("font-size", 10);
            },
            dragstarted(d) {
                if (!d3.event.active) this.simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
                d.fixed = true;
            },
            dragged(d) {
                d.fx = d3.event.x;
                d.fy = d3.event.y;
            },
            dragended(d) {
                if (!d3.event.active) this.simulation.alphaTarget(0);
            },
            drawnode(node) {
                var _this = this;
                var nodeEnter = node.enter().append("circle");
                nodeEnter.attr("r", function (d) {
                    if (typeof(d.r) != "undefined" && d.r != '') {
                        return d.r
                    }
                    return 30;
                });
                nodeEnter.attr("fill", function (d) {
                    if (typeof(d.color) != "undefined" && d.color != '') {
                        return d.color
                    }
                    return "#ff4500";
                });
                nodeEnter.style("opacity", 0.8);
                nodeEnter.style("stroke", function (d) {
                    if (typeof(d.color) != "undefined" && d.color != '') {
                        return d.color
                    }
                    return "#ff4500";
                });
                nodeEnter.style("stroke-opacity", 0.6);
                nodeEnter.append("title")// 为每个节点设置title
                    .text(function (d) {
                        return d.name;
                    })
                nodeEnter.on("mouseover", function (d, i) {
                    _this.timer = setTimeout(function () {
                        d3.select('#richContainer')
                            .style('position', 'absolute')
                            .style('left', d.x + "px")
                            .style('top', d.y + "px")
                            .style('display', 'block');
                        _this.editorcontent = "";
                        _this.showImageList = [];
                    }, 3000);
                });
                nodeEnter.on("mouseout", function (d, i) {
                    clearTimeout( _this.timer);
                });
                nodeEnter.on("dblclick", function (d) {
                    // 双击事件
                });
                nodeEnter.on("mouseenter", function (d) {
                    var aa = d3.select(this)._groups[0][0];
                    if (aa.classList.contains("selected")) return;
                    d3.select(this).style("stroke-width", "6");
                });
                nodeEnter.on("mouseleave", function (d) {
                    var aa = d3.select(this)._groups[0][0];
                    if (aa.classList.contains("selected")) return;
                    d3.select(this).style("stroke-width", "2");
                });
                nodeEnter.on("click", function (d,i) { //点击节点
                    var out_buttongroup_id='.out_buttongroup_'+i;
                    _this.svg.selectAll("use").classed("circle_opreate", true);
                    _this.svg.selectAll(out_buttongroup_id).classed("circle_opreate", false);
                    _this.graphEntity = d;
                    _this.selectnodeid = d.uuid;
                    _this.selectnodename = d.name;

                    console.log(d.uuid)
                    console.log(d.name)
                });
                nodeEnter.call(d3.drag()
                    .on("start", _this.dragstarted)
                    .on("drag", _this.dragged)
                    .on("end", _this.dragended));
                return nodeEnter;
            },
            drawnodetext(nodetext) {
                var _this = this;
                var nodetextenter = nodetext.enter().append("text")
                    .style("fill", "#fff")
                    .attr("dy", 4)
                    .attr("font-family", "微软雅黑")
                    .attr("text-anchor", "middle")
                    .text(function (d) {
                        var length = d.name.length;
                        if (d.name.length > 4) {
                            var s = d.name.slice(0, 4) + "...";
                            return s;
                        }
                        return d.name;
                    });
                nodetextenter.on("mouseover", function (d, i) {
                    _this.timer = setTimeout(function () {
                        d3.select('#richContainer')
                            .style('position', 'absolute')
                            .style('left', d.x + "px")
                            .style('top', d.y + "px")
                            .style('display', 'block');
                        _this.editorcontent = "";
                        _this.showImageList = [];
                    }, 3000);
                });
                nodetextenter.on("dblclick", function (d) {

                    console.log("双击了"+d.name+"的文字中心")
                    // 双击更新节点名称
                });
                nodetextenter.on("click", function (d) {//点击文字中心
                    $('#link_menubar').hide();// 隐藏空白处右键菜单
                    _this.graphEntity = d;
                    _this.selectnodeid = d.uuid;
                    console.log("点击了"+d.name+"的文字中心")
                });
                return nodetextenter;
            },
            drawnodesymbol(nodesymbol) {
                var _this = this;
                var symnol_path = "M566.92736 550.580907c30.907733-34.655573 25.862827-82.445653 25.862827-104.239787 0-108.086613-87.620267-195.805867-195.577173-195.805867-49.015467 0-93.310293 18.752853-127.68256 48.564907l-0.518827-0.484693-4.980053 4.97664c-1.744213 1.64864-3.91168 2.942293-5.59104 4.72064l0.515413 0.484693-134.69696 133.727573L216.439467 534.8352l0 0 137.478827-136.31488c11.605333-10.410667 26.514773-17.298773 43.165013-17.298773 36.051627 0 65.184427 29.197653 65.184427 65.24928 0 14.032213-5.33504 26.125653-12.73856 36.829867l-131.754667 132.594347 0.515413 0.518827c-10.31168 11.578027-17.07008 26.381653-17.07008 43.066027 0 36.082347 29.16352 65.245867 65.184427 65.245867 16.684373 0 31.460693-6.724267 43.035307-17.07008l0.515413 0.512M1010.336427 343.49056c0-180.25472-145.882453-326.331733-325.911893-326.331733-80.704853 0-153.77408 30.22848-210.418347 79.0528l0.484693 0.64512c-12.352853 11.834027-20.241067 28.388693-20.241067 46.916267 0 36.051627 29.16352 65.245867 65.211733 65.245867 15.909547 0 29.876907-6.36928 41.192107-15.844693l0.38912 0.259413c33.624747-28.030293 76.301653-45.58848 123.511467-45.58848 107.99104 0 195.549867 87.6544 195.549867 195.744427 0 59.815253-27.357867 112.71168-69.51936 148.503893l0 0-319.25248 317.928107 0 0c-35.826347 42.2912-88.654507 69.710507-148.340053 69.710507-107.956907 0-195.549867-87.68512-195.549867-195.805867 0-59.753813 27.385173-112.646827 69.515947-148.43904l-92.18048-92.310187c-65.69984 59.559253-107.700907 144.913067-107.700907 240.749227 0 180.28544 145.885867 326.301013 325.915307 326.301013 95.218347 0 180.02944-41.642667 239.581867-106.827093l0.13312 0.129707 321.061547-319.962453-0.126293-0.13312C968.69376 523.615573 1010.336427 438.71232 1010.336427 343.49056L1010.336427 343.49056 1010.336427 343.49056zM1010.336427 343.49056";// 定义回形针形状
                var nodesymbolEnter = nodesymbol.enter().append("path").attr("d", symnol_path);
                nodesymbolEnter.call(d3.drag()
                    .on("start", _this.dragstarted)
                    .on("drag", _this.dragged)
                    .on("end", _this.dragended));
                return nodesymbolEnter;
            },
            drawnodebutton(nodebutton) {
                var _this = this;
                var nodebuttonEnter = nodebutton.enter().append("g").append("use")//  为每个节点组添加一个 use 子元素
                    .attr("r", function(d){
                        return d.r;
                    })
                    .attr("xlink:href", "#out_circle") //  指定 use 引用的内容
                    .attr('class',function(d,i){
                        return 'buttongroup out_buttongroup_'+i;
                    })
                    .classed("circle_opreate", true);
                return nodebuttonEnter;
            },
            drawlink(link) {
                var _this = this;
                var linkEnter = link.enter().append("path")
                    .attr("stroke-width", 1)
                    .attr("stroke", "#fce6d4")
                    .attr("fill", "none")
                    .attr("id", function (d) {
                        return "invis_" + d.lk.sourceid + "-" + d.lk.name + "-" + d.lk.targetid;
                    })
                    .attr("marker-end", "url(#arrow)")
                ;// 箭头
                linkEnter.on("dblclick", function (d) {
                    _this.selectnodeid = d.lk.uuid;
                    if (_this.isdeletelink) {
                        _this.deletelink();
                    } else {
                        _this.updatelinkName();
                    }
                });
                linkEnter.on("contextmenu", function (d) {
                    var cc = $(this).offset();
                    app.selectnodeid = d.lk.uuid;
                    app.selectlinkname = d.lk.name;
                    d3.select('#link_menubar')
                        .style('position', 'absolute')
                        .style('left', cc.left + "px")
                        .style('top', cc.top + "px")
                        .style('display', 'block');
                    d3.event.preventDefault();// 禁止系统默认右键
                    d3.event.stopPropagation();// 禁止空白处右键
                });
                linkEnter.on("mouseenter", function (d) {
                    d3.select(this).style("stroke-width", "6").attr("stroke", "#ff9e9e").attr("marker-end", "url(#arrow2)");
                });
                linkEnter.on("mouseleave", function (d) {
                    d3.select(this).style("stroke-width", "1").attr("stroke", "#fce6d4").attr("marker-end", "url(#arrow)");
                });
                return linkEnter;
            },
            drawlinktext(link) {
                var linktextEnter = link.enter().append('text')
                    .style('fill', '#e3af85')
                    .append("textPath")
                    .attr("startOffset", "50%")
                    .attr("text-anchor", "middle")
                    .attr("xlink:href", function(d) {
                        return "#invis_" + d.lk.sourceid + "-" + d.lk.name + "-" + d.lk.targetid;
                    })
                    .style("font-size", 14)
                    .text(function (d) {
                        if (d.lk.name != '') {
                            return d.lk.name;
                        }
                    });
                linktextEnter.on("mouseover", function (d) {
                    app.selectnodeid = d.lk.uuid;
                    app.selectlinkname = d.lk.name;
                    var cc = $(this).offset();
                    d3.select('#link_menubar')
                        .style('position', 'absolute')
                        .style('left', cc.left + "px")
                        .style('top', cc.top + "px")
                        .style('display', 'block');
                });
                return linktextEnter;
            }
        }
    })
    $(function () {
        $(".graphcontainer").bind("contextmenu", function (event) {
            app.svg.selectAll("use").classed("circle_opreate", true);
            // var left = event.clientX;
            // var top = event.clientY;
            // document.getElementById('blank_menubar').style.position = 'absolute';
            // document.getElementById('blank_menubar').style.left = left + 'px';
            // document.getElementById('blank_menubar').style.top = top + 'px';
            // $('#blank_menubar').show();
            // event.preventDefault();
        });
        $("body").bind("mousedown", function (event) {
            if (!(event.target.id === "link_menubar" || $(event.target).parents("#link_menubar").length > 0)) {
                $("#link_menubar").hide();
            }
            if (!(event.target.id === "linkmenubar" || $(event.target).parents("#linkmenubar").length > 0)) {
                $("#linkmenubar").hide();
            }

        });
    })



</script>
</html>